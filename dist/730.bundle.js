(self.webpackChunkclientdevelop_lr5=self.webpackChunkclientdevelop_lr5||[]).push([[730],{730:(t,n,e)=>{"use strict";e.r(n),e.d(n,{default:()=>r,postRender:()=>d});var c=[];function a(){var t=0;return JSON.parse(0!==localStorage.getItem("cart").length)&&JSON.parse(localStorage.getItem("cart")).map((function(n){t+=n.count})),t}function o(){var t=a(),n=document.getElementById("cartQuantity");if(null==n){if(0!==t){var e=document.getElementById("cart-button");(n=document.createElement("span")).id="cartQuantity",n.innerHTML=t,e.appendChild(n)}}else 0===t?n.remove():n.innerHTML=t}document.querySelector("main").addEventListener("click",(function(t){if(t.target.classList.contains("delete-button")){var n=t.target.id.split("-")[1],e=document.getElementById("card-".concat(n)),a=document.getElementById("quantity-".concat(n)),r=document.getElementById("total-".concat(n)),d=r.innerHTML/a.innerHTML;c=JSON.parse(localStorage.getItem("cart"));for(var i=0;i<c.length;i++)if(c[i].id===n){c[i].count--,0===c[i].count?(e.remove(),c.splice(i,1)):(a.innerHTML=c[i].count,r.innerHTML=d*c[i].count);break}localStorage.setItem("cart",JSON.stringify(c)),o()}})),document.querySelector("main").addEventListener("click",(function(t){if("submitButton"===t.target.id){window.scrollTo({top:0,behavior:"smooth"});var n=document.getElementsByClassName("needs-validation");Array.prototype.filter.call(n,(function(t){t.addEventListener("submit",(function(n){if(n.preventDefault(),n.stopPropagation(),t.checkValidity()){if(document.querySelector("main").innerHTML='\n                    <div class="mt-4 pt-4">\n                                <div class="loading-spinner"></div>\n                    </div>\n                    ',0===a())return void(window.location.hash="");fetch("https://my-json-server.typicode.com/danil0110/McDonaldsDB/products",{method:"POST"}).then((function(t){if(t.ok){if(0===a())return;var n=Math.floor(Math.random()*Math.floor(1e5));window.location.hash="order/".concat(n)}else console.log("Error: try later")}))}t.classList.add("was-validated")}))}))}})),window.addEventListener("load",(function(){o()}));const r=function(t,n){var e="";e+='\n            <div class="row mt-4">\n                <div class="col-lg-8">\n                    <img class="w-100" src="'.concat(t.products[n-1].img,'" alt="').concat(t.products[n-1].name,'">\n                </div>\n                <div class="col-lg-4 d-flex flex-column justify-content-center">\n                    <h2 class="text-center text-dark font-weight-bold mt-4">').concat(t.products[n-1].name,'</h2>\n                    <p class="text-dark text-center mt-4 mb-4">\n                        ').concat(t.products[n-1].description,'\n                    </p>\n                    <div class="d-flex justify-content-center">\n                        <h4 class="text-center text-dark font-weight-bold mr-2">\n                            ').concat(t.products[n-1].price,' грн.\n                        </h4>\n                        <div id="').concat(t.products[n-1].id,'" class="btn btn-warning add-to-cart text-dark font-weight-bold ml-2" product="').concat(t.products[n-1].id,'">\n                            В кошик\n                        </div>\n                     </div>\n                </div>\n            </div>\n            <div class="popular-products">\n                <h2 class="text-center text-dark font-weight-bold">Інші продукти</h2>\n                <div class="row">\n    ');for(var c=0;c<t.products[n-1].relatedProducts.length;c++)for(var a=0;a<t.products.length;a++)t.products[a].id==t.products[n-1].relatedProducts[c]&&(e+=2!=c?'\n                    <div class="col-lg-4 col-md-6">\n                        <div class="card pt-2 mt-5 ml-auto mr-auto" style="width: 18rem;">\n                            <a href="#product/'.concat(t.products[a].id,'">\n                                <img src="').concat(t.products[a].img,'" class="card-img-top" alt="').concat(t.products[a].name,'">\n                                <div class="card-body">\n                                    <h4 class="card-text text-center text-dark">').concat(t.products[a].name,"</h4>\n                                </div>\n                            </a>\n                        </div>\n                    </div>\n                "):'\n                    <div class="col-lg-4 col-md-12">\n                        <div class="card pt-2 mt-5 ml-auto mr-auto" style="width: 18rem;">\n                            <a href="#product/'.concat(t.products[a].id,'">\n                                <img src="').concat(t.products[a].img,'" class="card-img-top" alt="').concat(t.products[a].name,'">\n                                <div class="card-body">\n                                    <h4 class="card-text text-center text-dark">').concat(t.products[a].name,"</h4>\n                                </div>\n                            </a>\n                        </div>\n                    </div>\n                    "));return e+"\n                </div>\n            </div>\n    "};var d=function(){document.querySelector(".add-to-cart").addEventListener("click",(function(){!function(){var t={id:window.location.hash.split("/")[1],count:1};if(null===JSON.parse(localStorage.getItem("cart"))||0===JSON.parse(localStorage.getItem("cart")).length)(c=[]).push(t);else{c=JSON.parse(localStorage.getItem("cart"));for(var n=!1,e=0;e<c.length;e++)if(t.id===c[e].id){c[e].count++,n=!0;break}n||c.push(t)}localStorage.setItem("cart",JSON.stringify(c)),o()}()}))}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jbGllbnRkZXZlbG9wX2xyNS8uL2pzL2NhcnQuanMiLCJ3ZWJwYWNrOi8vY2xpZW50ZGV2ZWxvcF9scjUvLi9qcy92aWV3cy9wcm9kdWN0UGFnZS5qcyJdLCJuYW1lcyI6WyJjYXJ0IiwiY2FsY3VsYXRlUXVhbnRpdHkiLCJyZXN1bHQiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwibGVuZ3RoIiwibWFwIiwicHJvZHVjdCIsImNvdW50IiwiZGlzcGxheVF1YW50aXR5T25DYXJ0QnV0dG9uIiwicXVhbnRpdHkiLCJzcGFuIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNhcnRCdXR0b24iLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJpbm5lckhUTUwiLCJhcHBlbmRDaGlsZCIsInJlbW92ZSIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInByb2R1Y3RJZCIsInNwbGl0IiwiY2FyZCIsInRvdGFsIiwic2luZ2xlUHJpY2UiLCJpIiwic3BsaWNlIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImV2ZW50MSIsIndpbmRvdyIsInNjcm9sbFRvIiwidG9wIiwiYmVoYXZpb3IiLCJmb3JtcyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJBcnJheSIsInByb3RvdHlwZSIsImZpbHRlciIsImNhbGwiLCJmb3JtIiwiZXZlbnQyIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJjaGVja1ZhbGlkaXR5IiwibG9jYXRpb24iLCJoYXNoIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwicmVzcG9uc2UiLCJvayIsIm9yZGVySWQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjb25zb2xlIiwibG9nIiwiYWRkIiwiZGIiLCJwcm9kdWN0cyIsImltZyIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInByaWNlIiwicmVsYXRl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UUFBUSxVQUF5RSxJQUFwREgsS0FBS0MsTUFBTUMsYUFBYUMsUUFBUSxTQUFTQyxRQUM5RlAsRUFBTyxJQUNGNEUsS0FBS25FLE9BQ1AsQ0FDSFQsRUFBT0csS0FBS0MsTUFBTUMsYUFBYUMsUUFBUSxTQUV2QyxJQURBLElBQUl1RSxHQUFVLEVBQ0w1QyxFQUFJLEVBQUdBLEVBQUlqQyxFQUFLTyxPQUFRMEIsSUFDN0IsR0FBSXhCLEVBQVFTLEtBQU9sQixFQUFLaUMsR0FBR2YsR0FBSSxDQUMzQmxCLEVBQUtpQyxHQUFHdkIsUUFDUm1FLEdBQVUsRUFDVixNQUlIQSxHQUNEN0UsRUFBSzRFLEtBQUtuRSxHQUlsQkosYUFBYThCLFFBQVEsT0FBUWhDLEtBQUtpQyxVQUFVcEMsSUFDNUNXLElDNkNJWCIsImZpbGUiOiI3MzAuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IGNhcnQgPSBbXTtcblxuZXhwb3J0IGNvbnN0IGFkZFRvQ2FydCA9ICgpID0+IHtcbiAgICBsZXQgcHJvZHVjdCA9IHtcbiAgICAgICAgaWQ6IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnNwbGl0KCcvJylbMV0sXG4gICAgICAgIGNvdW50OiAxXG4gICAgfTtcblxuICAgIGlmIChKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpID09PSBudWxsIHx8IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNhcnQgPSBbXTtcbiAgICAgICAgY2FydC5wdXNoKHByb2R1Y3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNhcnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpO1xuICAgICAgICBsZXQgaXNGb3VuZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNhcnQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChwcm9kdWN0LmlkID09PSBjYXJ0W2ldLmlkKSB7XG4gICAgICAgICAgICAgICAgY2FydFtpXS5jb3VudCsrO1xuICAgICAgICAgICAgICAgIGlzRm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc0ZvdW5kKSB7XG4gICAgICAgICAgICBjYXJ0LnB1c2gocHJvZHVjdCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FydCcsIEpTT04uc3RyaW5naWZ5KGNhcnQpKTtcbiAgICBkaXNwbGF5UXVhbnRpdHlPbkNhcnRCdXR0b24oKTtcbn07XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZVF1YW50aXR5KCkge1xuICAgIGxldCByZXN1bHQgPSAwO1xuICAgIGlmIChKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykubGVuZ3RoICE9PSAwKSkge1xuICAgICAgICBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpLm1hcChwcm9kdWN0ID0+IHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBwcm9kdWN0LmNvdW50O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gZGlzcGxheVF1YW50aXR5T25DYXJ0QnV0dG9uKCkge1xuICAgIGxldCBxdWFudGl0eSA9IGNhbGN1bGF0ZVF1YW50aXR5KCk7XG4gICAgbGV0IHNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FydFF1YW50aXR5Jyk7XG4gICAgaWYgKHNwYW4gPT0gbnVsbCkge1xuICAgICAgICBpZiAocXVhbnRpdHkgIT09IDApIHtcbiAgICAgICAgICAgIGxldCBjYXJ0QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhcnQtYnV0dG9uJyk7XG4gICAgICAgICAgICBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgc3Bhbi5pZCA9ICdjYXJ0UXVhbnRpdHknO1xuICAgICAgICAgICAgc3Bhbi5pbm5lckhUTUwgPSBxdWFudGl0eTtcbiAgICAgICAgICAgIGNhcnRCdXR0b24uYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocXVhbnRpdHkgPT09IDApIHtcbiAgICAgICAgICAgIHNwYW4ucmVtb3ZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcGFuLmlubmVySFRNTCA9IHF1YW50aXR5O1xuICAgICAgICB9XG4gICAgfVxufVxuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG4gICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2RlbGV0ZS1idXR0b24nKSkge1xuICAgICAgICBsZXQgcHJvZHVjdElkID0gZXZlbnQudGFyZ2V0LmlkLnNwbGl0KCctJylbMV07XG4gICAgICAgIGxldCBjYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGNhcmQtJHtwcm9kdWN0SWR9YCk7XG4gICAgICAgIGxldCBxdWFudGl0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBxdWFudGl0eS0ke3Byb2R1Y3RJZH1gKTtcbiAgICAgICAgbGV0IHRvdGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHRvdGFsLSR7cHJvZHVjdElkfWApO1xuICAgICAgICBsZXQgc2luZ2xlUHJpY2UgPSB0b3RhbC5pbm5lckhUTUwgLyBxdWFudGl0eS5pbm5lckhUTUw7XG4gICAgICAgIGNhcnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FydC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGNhcnRbaV0uaWQgPT09IHByb2R1Y3RJZCkge1xuICAgICAgICAgICAgICAgIGNhcnRbaV0uY291bnQtLTtcbiAgICAgICAgICAgICAgICBpZiAoY2FydFtpXS5jb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjYXJkLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBjYXJ0LnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eS5pbm5lckhUTUwgPSBjYXJ0W2ldLmNvdW50O1xuICAgICAgICAgICAgICAgICAgICB0b3RhbC5pbm5lckhUTUwgPSBzaW5nbGVQcmljZSAqIGNhcnRbaV0uY291bnQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FydCcsIEpTT04uc3RyaW5naWZ5KGNhcnQpKTtcbiAgICAgICAgZGlzcGxheVF1YW50aXR5T25DYXJ0QnV0dG9uKCk7XG4gICAgfVxufSk7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50MSA9PiB7XG4gICAgaWYgKGV2ZW50MS50YXJnZXQuaWQgPT09ICdzdWJtaXRCdXR0b24nKSB7XG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbyh7XG4gICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCdcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBmb3JtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ25lZWRzLXZhbGlkYXRpb24nKTtcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGZvcm1zLCBmb3JtID0+IHtcbiAgICAgICAgICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZXZlbnQyID0+IHtcbiAgICAgICAgICAgICAgICBldmVudDIucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBldmVudDIuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKGZvcm0uY2hlY2tWYWxpZGl0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKS5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtdC00IHB0LTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxvYWRpbmctc3Bpbm5lclwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGN1bGF0ZVF1YW50aXR5KCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmV0Y2goJ2h0dHBzOi8vbXktanNvbi1zZXJ2ZXIudHlwaWNvZGUuY29tL2RhbmlsMDExMC9NY0RvbmFsZHNEQi9wcm9kdWN0cycsIHsgbWV0aG9kOiAnUE9TVCcgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGN1bGF0ZVF1YW50aXR5KCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3JkZXJJZCA9IGdlbmVyYXRlT3JkZXJJZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IGBvcmRlci8ke29yZGVySWR9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvcjogdHJ5IGxhdGVyJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvcm0uY2xhc3NMaXN0LmFkZCgnd2FzLXZhbGlkYXRlZCcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVPcmRlcklkKCkge1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBNYXRoLmZsb29yKDEwMDAwMCkpO1xufVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcbiAgICBkaXNwbGF5UXVhbnRpdHlPbkNhcnRCdXR0b24oKTtcbn0pOyIsImltcG9ydCAqIGFzIGNhcnQgZnJvbSAnLi4vY2FydC5qcyc7XG5cbmNvbnN0IHZpZXcgPSAoZGIsIHByb2R1Y3RJZCkgPT4ge1xuICAgIGxldCByZXN1bHQgPSAnJztcbiAgICByZXN1bHQgKz0gYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBtdC00XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1sZy04XCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJ3LTEwMFwiIHNyYz1cIiR7ZGIucHJvZHVjdHNbcHJvZHVjdElkIC0gMV0uaW1nfVwiIGFsdD1cIiR7ZGIucHJvZHVjdHNbcHJvZHVjdElkIC0gMV0ubmFtZX1cIj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLWxnLTQgZC1mbGV4IGZsZXgtY29sdW1uIGp1c3RpZnktY29udGVudC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzPVwidGV4dC1jZW50ZXIgdGV4dC1kYXJrIGZvbnQtd2VpZ2h0LWJvbGQgbXQtNFwiPiR7ZGIucHJvZHVjdHNbcHJvZHVjdElkIC0gMV0ubmFtZX08L2gyPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRleHQtZGFyayB0ZXh0LWNlbnRlciBtdC00IG1iLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICR7ZGIucHJvZHVjdHNbcHJvZHVjdElkIC0gMV0uZGVzY3JpcHRpb259XG4gICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJ0ZXh0LWNlbnRlciB0ZXh0LWRhcmsgZm9udC13ZWlnaHQtYm9sZCBtci0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtkYi5wcm9kdWN0c1twcm9kdWN0SWQgLSAxXS5wcmljZX0g0LPRgNC9LlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCIke2RiLnByb2R1Y3RzW3Byb2R1Y3RJZCAtIDFdLmlkfVwiIGNsYXNzPVwiYnRuIGJ0bi13YXJuaW5nIGFkZC10by1jYXJ0IHRleHQtZGFyayBmb250LXdlaWdodC1ib2xkIG1sLTJcIiBwcm9kdWN0PVwiJHtkYi5wcm9kdWN0c1twcm9kdWN0SWQgLSAxXS5pZH1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICDQkiDQutC+0YjQuNC6XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicG9wdWxhci1wcm9kdWN0c1wiPlxuICAgICAgICAgICAgICAgIDxoMiBjbGFzcz1cInRleHQtY2VudGVyIHRleHQtZGFyayBmb250LXdlaWdodC1ib2xkXCI+0IbQvdGI0ZYg0L/RgNC+0LTRg9C60YLQuDwvaDI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgIGA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYi5wcm9kdWN0c1twcm9kdWN0SWQgLSAxXS5yZWxhdGVkUHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBkYi5wcm9kdWN0cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgaWYgKGRiLnByb2R1Y3RzW2pdLmlkID09IGRiLnByb2R1Y3RzW3Byb2R1Y3RJZCAtIDFdLnJlbGF0ZWRQcm9kdWN0c1tpXSkge1xuICAgICAgICAgICAgICAgIGlmIChpICE9IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1sZy00IGNvbC1tZC02XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZCBwdC0yIG10LTUgbWwtYXV0byBtci1hdXRvXCIgc3R5bGU9XCJ3aWR0aDogMThyZW07XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiNwcm9kdWN0LyR7ZGIucHJvZHVjdHNbal0uaWR9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtkYi5wcm9kdWN0c1tqXS5pbWd9XCIgY2xhc3M9XCJjYXJkLWltZy10b3BcIiBhbHQ9XCIke2RiLnByb2R1Y3RzW2pdLm5hbWV9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cImNhcmQtdGV4dCB0ZXh0LWNlbnRlciB0ZXh0LWRhcmtcIj4ke2RiLnByb2R1Y3RzW2pdLm5hbWV9PC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIGA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLWxnLTQgY29sLW1kLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZCBwdC0yIG10LTUgbWwtYXV0byBtci1hdXRvXCIgc3R5bGU9XCJ3aWR0aDogMThyZW07XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiNwcm9kdWN0LyR7ZGIucHJvZHVjdHNbal0uaWR9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtkYi5wcm9kdWN0c1tqXS5pbWd9XCIgY2xhc3M9XCJjYXJkLWltZy10b3BcIiBhbHQ9XCIke2RiLnByb2R1Y3RzW2pdLm5hbWV9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cImNhcmQtdGV4dCB0ZXh0LWNlbnRlciB0ZXh0LWRhcmtcIj4ke2RiLnByb2R1Y3RzW2pdLm5hbWV9PC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICBgO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlc3VsdCArPSBgXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICBgO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB2aWV3O1xuZXhwb3J0IGNvbnN0IHBvc3RSZW5kZXIgPSAoKSA9PiB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10by1jYXJ0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNhcnQuYWRkVG9DYXJ0KCk7XG4gICAgfSk7XG59OyJdLCJzb3VyY2VSb290IjoiIn0=