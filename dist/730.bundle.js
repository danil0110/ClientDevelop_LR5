(self.webpackChunkclientdevelop_lr5=self.webpackChunkclientdevelop_lr5||[]).push([[730],{730:(t,n,e)=>{"use strict";e.r(n),e.d(n,{default:()=>r,postRender:()=>d});var c=new Array;function a(){var t=0;return JSON.parse(0!=localStorage.getItem("cart").length)&&JSON.parse(localStorage.getItem("cart")).map((function(n){t+=n.count})),t}function o(){var t=a(),n=document.getElementById("cartQuantity");if(null==n){if(0!=t){var e=document.getElementById("cart-button");(n=document.createElement("span")).id="cartQuantity",n.innerHTML=t,e.appendChild(n)}}else 0==t?n.remove():n.innerHTML=t}document.querySelector("main").addEventListener("click",(function(t){if(t.target.classList.contains("delete-button")){var n=t.target.id.split("-")[1],e=document.getElementById("card-".concat(n)),a=document.getElementById("quantity-".concat(n)),r=document.getElementById("total-".concat(n)),d=r.innerHTML/a.innerHTML;c=JSON.parse(localStorage.getItem("cart"));for(var i=0;i<c.length;i++)if(c[i].id==n){c[i].count--,0==c[i].count?(e.remove(),c.splice(i,1)):(a.innerHTML=c[i].count,r.innerHTML=d*c[i].count);break}localStorage.setItem("cart",JSON.stringify(c)),o()}})),document.querySelector("main").addEventListener("click",(function(t){if("submitButton"==t.target.id){window.scrollTo({top:0,behavior:"smooth"});var n=document.getElementsByClassName("needs-validation");Array.prototype.filter.call(n,(function(t){t.addEventListener("submit",(function(n){if(n.preventDefault(),n.stopPropagation(),t.checkValidity()){if(document.querySelector("main").innerHTML='\n                    <div class="mt-4 pt-4">\n                                <div class="loading-spinner"></div>\n                    </div>\n                    ',0==a())return void(window.location.hash="");fetch("https://my-json-server.typicode.com/danil0110/McDonaldsDB/products",{method:"POST"}).then((function(t){if(t.ok){if(0==a())return;var n=Math.floor(Math.random()*Math.floor(1e5));window.location.hash="order/".concat(n)}else console.log("Error: try later")}))}t.classList.add("was-validated")}))}))}})),window.addEventListener("load",(function(){o()}));const r=function(t,n){var e="";e+='\n            <div class="row mt-4">\n                <div class="col-lg-8">\n                    <img class="w-100" src="'.concat(t.products[n-1].img,'" alt="').concat(t.products[n-1].name,'">\n                </div>\n                <div class="col-lg-4 d-flex flex-column justify-content-center">\n                    <h2 class="text-center text-dark font-weight-bold mt-4">').concat(t.products[n-1].name,'</h2>\n                    <p class="text-dark text-center mt-4 mb-4">\n                        ').concat(t.products[n-1].description,'\n                    </p>\n                    <div class="d-flex justify-content-center">\n                        <h4 class="text-center text-dark font-weight-bold mr-2">\n                            ').concat(t.products[n-1].price,' грн.\n                        </h4>\n                        <div id="').concat(t.products[n-1].id,'" class="btn btn-warning add-to-cart text-dark font-weight-bold ml-2" product="').concat(t.products[n-1].id,'">\n                            В кошик\n                        </div>\n                     </div>\n                </div>\n            </div>\n            <div class="popular-products">\n                <h2 class="text-center text-dark font-weight-bold">Інші продукти</h2>\n                <div class="row">\n    ');for(var c=0;c<t.products[n-1].relatedProducts.length;c++)for(var a=0;a<t.products.length;a++)t.products[a].id==t.products[n-1].relatedProducts[c]&&(e+=2!=c?'\n                    <div class="col-lg-4 col-md-6">\n                        <div class="card pt-2 mt-5 ml-auto mr-auto" style="width: 18rem;">\n                            <a href="#product/'.concat(t.products[a].id,'">\n                                <img src="').concat(t.products[a].img,'" class="card-img-top" alt="').concat(t.products[a].name,'">\n                                <div class="card-body">\n                                    <h4 class="card-text text-center text-dark">').concat(t.products[a].name,"</h4>\n                                </div>\n                            </a>\n                        </div>\n                    </div>\n                "):'\n                    <div class="col-lg-4 col-md-12">\n                        <div class="card pt-2 mt-5 ml-auto mr-auto" style="width: 18rem;">\n                            <a href="#product/'.concat(t.products[a].id,'">\n                                <img src="').concat(t.products[a].img,'" class="card-img-top" alt="').concat(t.products[a].name,'">\n                                <div class="card-body">\n                                    <h4 class="card-text text-center text-dark">').concat(t.products[a].name,"</h4>\n                                </div>\n                            </a>\n                        </div>\n                    </div>\n                    "));return e+"\n                </div>\n            </div>\n    "};var d=function(){document.querySelector(".add-to-cart").addEventListener("click",(function(){!function(){var t={id:window.location.hash.split("/")[1],count:1};if(null===JSON.parse(localStorage.getItem("cart"))||0==JSON.parse(localStorage.getItem("cart")).length)(c=new Array).push(t);else{c=JSON.parse(localStorage.getItem("cart"));for(var n=!1,e=0;e<c.length;e++)if(t.id==c[e].id){c[e].count++,n=!0;break}n||c.push(t)}localStorage.setItem("cart",JSON.stringify(c)),o()}()}))}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jbGllbnRkZXZlbG9wX2xyNS8uL2pzL2NhcnQuanMiLCJ3ZWJwYWNrOi8vY2xpZW50ZGV2ZWxvcF9scjUvLi9qcy92aWV3cy9wcm9kdWN0UGFnZS5qcyJdLCJuYW1lcyI6WyJjYXJ0IiwiQXJyYXkiLCJjYWxjdWxhdGVRdWFudGl0eSIsInJlc3VsdCIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJsZW5ndGgiLCJtYXAiLCJwcm9kdWN0IiwiY291bnQiLCJkaXNwbGF5UXVhbnRpdHlPbkNhcnRCdXR0b24iLCJxdWFudGl0eSIsInNwYW4iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2FydEJ1dHRvbiIsImNyZWF0ZUVsZW1lbnQiLCJpZCIsImlubmVySFRNTCIsImFwcGVuZENoaWxkIiwicmVtb3ZlIiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicHJvZHVjdElkIiwic3BsaXQiLCJjYXJkIiwidG90YWwiLCJzaW5nbGVQcmljZSIsImkiLCJzcGxpY2UiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiZXZlbnQxIiwid2luZG93Iiwic2Nyb2xsVG8iLCJ0b3AiLCJiZWhhdmlvciIsImZvcm1zIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInByb3RvdHlwZSIsImZpbHRlciIsImNhbGwiLCJmb3JtIiwiZXZlbnQyIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJjaGVja1ZhbGlkaXR5IiwibG9jYXRpb24iLCJoYXNoIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwicmVzcG9uc2UiLCJvayIsIm9yZGVySWQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjb25zb2xlIiwibG9nIiwiYWRkIiwiZGIiLCJwcm9kdWN0cyIsImltZyIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInByaWNlIiwicmVsYXRl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YUFBYUMsUUFBUSxVQUF3RSxHQUFuREgsS0FBS0MsTUFBTUMsYUFBYUMsUUFBUSxTQUFTQyxRQUM5RlIsRUFBTyxJQUFJQyxPQUNOMkUsS0FBS2xFLE9BQ1AsQ0FDSFYsRUFBT0ksS0FBS0MsTUFBTUMsYUFBYUMsUUFBUSxTQUV2QyxJQURBLElBQUlzRSxHQUFVLEVBQ0wzQyxFQUFJLEVBQUdBLEVBQUlsQyxFQUFLUSxPQUFRMEIsSUFDN0IsR0FBSXhCLEVBQVFTLElBQU1uQixFQUFLa0MsR0FBR2YsR0FBSSxDQUMxQm5CLEVBQUtrQyxHQUFHdkIsUUFDUmtFLEdBQVUsRUFDVixNQUlIQSxHQUNEN0UsRUFBSzRFLEtBQUtsRSxHQUlsQkosYUFBYThCLFFBQVEsT0FBUWhDLEtBQUtpQyxVQUFVckMsSUFDNUNZLElDNkNJWiIsImZpbGUiOiI3MzAuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IGNhcnQgPSBuZXcgQXJyYXk7XG5cbmV4cG9ydCBjb25zdCBhZGRUb0NhcnQgPSAoKSA9PiB7XG4gICAgbGV0IHByb2R1Y3QgPSB7XG4gICAgICAgIGlkOiB3aW5kb3cubG9jYXRpb24uaGFzaC5zcGxpdCgnLycpWzFdLFxuICAgICAgICBjb3VudDogMVxuICAgIH07XG5cbiAgICBpZiAoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FydCcpKSA9PT0gbnVsbCB8fCBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIGNhcnQgPSBuZXcgQXJyYXk7XG4gICAgICAgIGNhcnQucHVzaChwcm9kdWN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjYXJ0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FydCcpKTtcbiAgICAgICAgbGV0IGlzRm91bmQgPSBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYXJ0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAocHJvZHVjdC5pZCA9PSBjYXJ0W2ldLmlkKSB7XG4gICAgICAgICAgICAgICAgY2FydFtpXS5jb3VudCsrO1xuICAgICAgICAgICAgICAgIGlzRm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc0ZvdW5kKSB7XG4gICAgICAgICAgICBjYXJ0LnB1c2gocHJvZHVjdCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FydCcsIEpTT04uc3RyaW5naWZ5KGNhcnQpKTtcbiAgICBkaXNwbGF5UXVhbnRpdHlPbkNhcnRCdXR0b24oKTtcbn07XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZVF1YW50aXR5KCkge1xuICAgIGxldCByZXN1bHQgPSAwO1xuICAgIGlmIChKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykubGVuZ3RoICE9IDApKSB7XG4gICAgICAgIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSkubWFwKHByb2R1Y3QgPT4ge1xuICAgICAgICAgICAgcmVzdWx0ICs9IHByb2R1Y3QuY291bnQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBkaXNwbGF5UXVhbnRpdHlPbkNhcnRCdXR0b24oKSB7XG4gICAgbGV0IHF1YW50aXR5ID0gY2FsY3VsYXRlUXVhbnRpdHkoKTtcbiAgICBsZXQgc3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJ0UXVhbnRpdHknKTtcbiAgICBpZiAoc3BhbiA9PSBudWxsKSB7XG4gICAgICAgIGlmIChxdWFudGl0eSAhPSAwKSB7XG4gICAgICAgICAgICBsZXQgY2FydEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJ0LWJ1dHRvbicpO1xuICAgICAgICAgICAgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgIHNwYW4uaWQgPSAnY2FydFF1YW50aXR5JztcbiAgICAgICAgICAgIHNwYW4uaW5uZXJIVE1MID0gcXVhbnRpdHk7XG4gICAgICAgICAgICBjYXJ0QnV0dG9uLmFwcGVuZENoaWxkKHNwYW4pO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHF1YW50aXR5ID09IDApIHtcbiAgICAgICAgICAgIHNwYW4ucmVtb3ZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcGFuLmlubmVySFRNTCA9IHF1YW50aXR5O1xuICAgICAgICB9XG4gICAgfVxufVxuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG4gICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2RlbGV0ZS1idXR0b24nKSkge1xuICAgICAgICBsZXQgcHJvZHVjdElkID0gZXZlbnQudGFyZ2V0LmlkLnNwbGl0KCctJylbMV07XG4gICAgICAgIGxldCBjYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGNhcmQtJHtwcm9kdWN0SWR9YCk7XG4gICAgICAgIGxldCBxdWFudGl0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBxdWFudGl0eS0ke3Byb2R1Y3RJZH1gKTtcbiAgICAgICAgbGV0IHRvdGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHRvdGFsLSR7cHJvZHVjdElkfWApO1xuICAgICAgICBsZXQgc2luZ2xlUHJpY2UgPSB0b3RhbC5pbm5lckhUTUwgLyBxdWFudGl0eS5pbm5lckhUTUw7XG4gICAgICAgIGNhcnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FydC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGNhcnRbaV0uaWQgPT0gcHJvZHVjdElkKSB7XG4gICAgICAgICAgICAgICAgY2FydFtpXS5jb3VudC0tO1xuICAgICAgICAgICAgICAgIGlmIChjYXJ0W2ldLmNvdW50ID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FyZC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgY2FydC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHkuaW5uZXJIVE1MID0gY2FydFtpXS5jb3VudDtcbiAgICAgICAgICAgICAgICAgICAgdG90YWwuaW5uZXJIVE1MID0gc2luZ2xlUHJpY2UgKiBjYXJ0W2ldLmNvdW50O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhcnQnLCBKU09OLnN0cmluZ2lmeShjYXJ0KSk7XG4gICAgICAgIGRpc3BsYXlRdWFudGl0eU9uQ2FydEJ1dHRvbigpO1xuICAgIH1cbn0pO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudDEgPT4ge1xuICAgIGlmIChldmVudDEudGFyZ2V0LmlkID09ICdzdWJtaXRCdXR0b24nKSB7XG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbyh7XG4gICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCdcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBmb3JtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ25lZWRzLXZhbGlkYXRpb24nKTtcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGZvcm1zLCBmb3JtID0+IHtcbiAgICAgICAgICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZXZlbnQyID0+IHtcbiAgICAgICAgICAgICAgICBldmVudDIucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBldmVudDIuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKGZvcm0uY2hlY2tWYWxpZGl0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKS5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtdC00IHB0LTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxvYWRpbmctc3Bpbm5lclwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGN1bGF0ZVF1YW50aXR5KCkgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmZXRjaCgnaHR0cHM6Ly9teS1qc29uLXNlcnZlci50eXBpY29kZS5jb20vZGFuaWwwMTEwL01jRG9uYWxkc0RCL3Byb2R1Y3RzJywgeyBtZXRob2Q6ICdQT1NUJyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FsY3VsYXRlUXVhbnRpdHkoKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9yZGVySWQgPSBnZW5lcmF0ZU9yZGVySWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBgb3JkZXIvJHtvcmRlcklkfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3I6IHRyeSBsYXRlcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3JtLmNsYXNzTGlzdC5hZGQoJ3dhcy12YWxpZGF0ZWQnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlT3JkZXJJZCgpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogTWF0aC5mbG9vcigxMDAwMDApKTtcbn1cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gICAgZGlzcGxheVF1YW50aXR5T25DYXJ0QnV0dG9uKCk7XG59KTsiLCJpbXBvcnQgKiBhcyBjYXJ0IGZyb20gJy4uL2NhcnQuanMnO1xuXG5jb25zdCB2aWV3ID0gKGRiLCBwcm9kdWN0SWQpID0+IHtcbiAgICBsZXQgcmVzdWx0ID0gJyc7XG4gICAgcmVzdWx0ICs9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgbXQtNFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbGctOFwiPlxuICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVwidy0xMDBcIiBzcmM9XCIke2RiLnByb2R1Y3RzW3Byb2R1Y3RJZCAtIDFdLmltZ31cIiBhbHQ9XCIke2RiLnByb2R1Y3RzW3Byb2R1Y3RJZCAtIDFdLm5hbWV9XCI+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1sZy00IGQtZmxleCBmbGV4LWNvbHVtbiBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMiBjbGFzcz1cInRleHQtY2VudGVyIHRleHQtZGFyayBmb250LXdlaWdodC1ib2xkIG10LTRcIj4ke2RiLnByb2R1Y3RzW3Byb2R1Y3RJZCAtIDFdLm5hbWV9PC9oMj5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0ZXh0LWRhcmsgdGV4dC1jZW50ZXIgbXQtNCBtYi00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAke2RiLnByb2R1Y3RzW3Byb2R1Y3RJZCAtIDFdLmRlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwidGV4dC1jZW50ZXIgdGV4dC1kYXJrIGZvbnQtd2VpZ2h0LWJvbGQgbXItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGIucHJvZHVjdHNbcHJvZHVjdElkIC0gMV0ucHJpY2V9INCz0YDQvS5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwiJHtkYi5wcm9kdWN0c1twcm9kdWN0SWQgLSAxXS5pZH1cIiBjbGFzcz1cImJ0biBidG4td2FybmluZyBhZGQtdG8tY2FydCB0ZXh0LWRhcmsgZm9udC13ZWlnaHQtYm9sZCBtbC0yXCIgcHJvZHVjdD1cIiR7ZGIucHJvZHVjdHNbcHJvZHVjdElkIC0gMV0uaWR9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAg0JIg0LrQvtGI0LjQulxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBvcHVsYXItcHJvZHVjdHNcIj5cbiAgICAgICAgICAgICAgICA8aDIgY2xhc3M9XCJ0ZXh0LWNlbnRlciB0ZXh0LWRhcmsgZm9udC13ZWlnaHQtYm9sZFwiPtCG0L3RiNGWINC/0YDQvtC00YPQutGC0Lg8L2gyPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICBgO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGIucHJvZHVjdHNbcHJvZHVjdElkIC0gMV0ucmVsYXRlZFByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZGIucHJvZHVjdHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGlmIChkYi5wcm9kdWN0c1tqXS5pZCA9PSBkYi5wcm9kdWN0c1twcm9kdWN0SWQgLSAxXS5yZWxhdGVkUHJvZHVjdHNbaV0pIHtcbiAgICAgICAgICAgICAgICBpZiAoaSAhPSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBgXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbGctNCBjb2wtbWQtNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQgcHQtMiBtdC01IG1sLWF1dG8gbXItYXV0b1wiIHN0eWxlPVwid2lkdGg6IDE4cmVtO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjcHJvZHVjdC8ke2RiLnByb2R1Y3RzW2pdLmlkfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7ZGIucHJvZHVjdHNbal0uaW1nfVwiIGNsYXNzPVwiY2FyZC1pbWctdG9wXCIgYWx0PVwiJHtkYi5wcm9kdWN0c1tqXS5uYW1lfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJjYXJkLXRleHQgdGV4dC1jZW50ZXIgdGV4dC1kYXJrXCI+JHtkYi5wcm9kdWN0c1tqXS5uYW1lfTwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBgO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1sZy00IGNvbC1tZC0xMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQgcHQtMiBtdC01IG1sLWF1dG8gbXItYXV0b1wiIHN0eWxlPVwid2lkdGg6IDE4cmVtO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjcHJvZHVjdC8ke2RiLnByb2R1Y3RzW2pdLmlkfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7ZGIucHJvZHVjdHNbal0uaW1nfVwiIGNsYXNzPVwiY2FyZC1pbWctdG9wXCIgYWx0PVwiJHtkYi5wcm9kdWN0c1tqXS5uYW1lfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJjYXJkLXRleHQgdGV4dC1jZW50ZXIgdGV4dC1kYXJrXCI+JHtkYi5wcm9kdWN0c1tqXS5uYW1lfTwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXN1bHQgKz0gYFxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgYDtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdmlldztcbmV4cG9ydCBjb25zdCBwb3N0UmVuZGVyID0gKCkgPT4ge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtdG8tY2FydCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjYXJ0LmFkZFRvQ2FydCgpO1xuICAgIH0pO1xufTsiXSwic291cmNlUm9vdCI6IiJ9